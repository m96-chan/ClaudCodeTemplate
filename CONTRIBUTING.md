# コントリビューションガイド

ClaudeCode Command Template へのコントリビューションに興味を持っていただき、ありがとうございます! このドキュメントでは、プロジェクトへの貢献方法について説明します。

## 目次

- [行動規範](#行動規範)
- [貢献の方法](#貢献の方法)
- [開発環境のセットアップ](#開発環境のセットアップ)
- [コマンドの開発](#コマンドの開発)
- [ドキュメントの作成](#ドキュメントの作成)
- [プルリクエストの作成](#プルリクエストの作成)
- [コードレビュー](#コードレビュー)
- [リリースプロセス](#リリースプロセス)

## 行動規範

このプロジェクトでは、すべての貢献者に対して以下の行動を期待しています:

- 敬意を持ったコミュニケーション
- 建設的なフィードバック
- 多様性の尊重
- コミュニティの成長への貢献

## 貢献の方法

### 貢献できる領域

1. **新しいコマンドの追加**
   - 既存にない機能のコマンド
   - 他の言語・フレームワークへの対応
   - ワークフロー改善のためのコマンド

2. **既存コマンドの改善**
   - バグ修正
   - 機能追加
   - パフォーマンス改善
   - エラーハンドリングの強化

3. **ドキュメントの改善**
   - README.mdの改善
   - コマンドリファレンスの拡充
   - 使用例の追加
   - 翻訳（英語等）

4. **バグ報告**
   - 問題の詳細な報告
   - 再現手順の提供
   - 期待される動作の説明

5. **機能提案**
   - 新機能のアイデア
   - ワークフロー改善の提案
   - ユースケースの共有

## 開発環境のセットアップ

### 必要なツール

- **ClaudeCode**: 最新版（[インストール方法](https://claude.com/claude-code)）
- **Git**: バージョン管理
- **GitHub CLI**: GitHub統合機能のテスト用（オプション）
- **テキストエディタ**: VS Code推奨

### リポジトリのクローン

```bash
# リポジトリをフォーク後
git clone https://github.com/YOUR_USERNAME/ClaudCodeTemplate.git
cd ClaudCodeTemplate

# 上流リポジトリを追加
git remote add upstream https://github.com/m96-chan/ClaudCodeTemplate.git
```

### ブランチ戦略

```bash
# 最新のmainブランチを取得
git checkout main
git pull upstream main

# 機能ブランチを作成
git checkout -b feature/your-feature-name
# または
git checkout -b fix/your-bug-fix
```

**ブランチ命名規則**:
- `feature/`: 新機能追加
- `fix/`: バグ修正
- `docs/`: ドキュメント更新
- `refactor/`: リファクタリング
- `test/`: テスト追加・修正

## コマンドの開発

### 新しいコマンドの作成手順

#### 1. コマンドの計画

**検討事項**:
- コマンドの目的と責務
- 必要な入力（引数）
- 生成される出力
- 依存する外部ツール
- 既存コマンドとの関係

**例**: `/gh-workflow` コマンドの計画
```
目的: GitHub Actionsワークフローを生成
入力: --type=[ci|cd|release]
出力: .github/workflows/*.yml
依存: GitHub CLI, リポジトリ
```

#### 2. コマンドファイルの作成

```bash
# ファイル作成
touch .claude/commands/gh-workflow.md
```

```markdown
---
description: GitHub Actions ワークフローを生成する
---

## 前提条件の確認

1. GitHub CLIが認証済みであることを確認する（`gh auth status`）
2. 現在のディレクトリがGitリポジトリであることを確認する
3. リモートリポジトリが設定されていることを確認する

## タスクの実行

### 1. ワークフロータイプの決定

$ARGUMENTS で指定されたワークフロータイプを確認:
- `ci`: 継続的インテグレーション
- `cd`: 継続的デプロイメント
- `release`: リリース自動化

指定がない場合は、ユーザーに確認する。

### 2. プロジェクト構造の分析

以下のファイルを確認してプロジェクトの種類を判定:
- `package.json`: Node.js プロジェクト
- `requirements.txt` または `pyproject.toml`: Python プロジェクト
- `Cargo.toml`: Rust プロジェクト
- `go.mod`: Go プロジェクト

### 3. ワークフローファイルの生成

プロジェクトの種類とワークフロータイプに応じて、
`.github/workflows/` 配下に適切な YAML ファイルを生成する。

**CI ワークフロー**:
- テストの実行
- Lintの実行
- ビルドの確認

**CD ワークフロー**:
- デプロイ先の環境変数設定
- デプロイスクリプトの実行
- デプロイ後の確認

**Release ワークフロー**:
- バージョンタグのトリガー
- CHANGELOG の生成
- GitHub Release の作成

### 4. ワークフローのテスト方法を提示

生成したワークフローをテストする手順を表示:
```bash
# ローカルでのテスト（act を使用）
act push

# GitHubでのテスト
git push origin feature/add-workflow
```

## オプション引数

- `--type=[ci|cd|release]`: ワークフロータイプを指定
- `--language=[node|python|rust|go]`: プロジェクト言語を明示的に指定

## 注意事項

- 既存のワークフローファイルがある場合は上書き確認を行う
- シークレット変数が必要な場合は、その設定方法を案内する
- ワークフローのトリガー条件を明確にする
```

#### 3. 権限の設定

必要に応じて `.claude/settings.local.json` に権限を追加:

```json
{
  "permissions": {
    "allow": [
      "Bash(gh:*)",
      "Bash(git:*)"
    ]
  }
}
```

#### 4. テスト

```bash
# ClaudeCodeでコマンドを実行
/gh-workflow --type=ci

# 動作確認
# - 前提条件のチェックが正しく行われるか
# - ファイルが正しい場所に生成されるか
# - エラーハンドリングが適切か
# - 出力メッセージがわかりやすいか
```

#### 5. ドキュメントの更新

**README.md**:
```markdown
### GitHub Issue関連

- `/gh-workflow` - GitHub Actions ワークフローを生成する
```

**how_to_vibe_coding/COMMANDS.md**:
```markdown
### /gh-workflow

**説明**: GitHub Actions ワークフローを生成する

**構文**:
\`\`\`
/gh-workflow [オプション]
\`\`\`

**引数**:
- `--type=[ci|cd|release]`: ワークフロータイプを指定
- `--language=[node|python|rust|go]`: プロジェクト言語を指定

**動作フロー**:
1. 前提条件を確認
2. プロジェクト構造を分析
3. 適切なワークフローファイルを生成
4. テスト方法を提示

**使用例**:
\`\`\`
/gh-workflow --type=ci
/gh-workflow --type=cd --language=python
\`\`\`

**前提条件**:
- GitHub CLIが認証済み
- Gitリポジトリであること

**注意事項**:
- 既存のワークフローファイルは上書き確認されます
- シークレット変数の設定が必要な場合があります
```

### コマンド開発のベストプラクティス

1. **単一責務**: 1つのコマンドは1つの明確な目的を持つ
2. **段階的実行**: 複雑なタスクは小さなステップに分割
3. **ユーザー確認**: 破壊的操作の前に必ず確認を求める
4. **エラーハンドリング**: 想定されるエラーに対処する
5. **明確な出力**: 実行結果をわかりやすく表示
6. **ドキュメント**: コマンドと同時にドキュメントを作成

### テストチェックリスト

- [ ] 前提条件が正しくチェックされる
- [ ] 引数が正しく解析される
- [ ] ファイルが正しい場所に生成される
- [ ] 既存ファイルの上書き確認が動作する
- [ ] エラー時に適切なメッセージが表示される
- [ ] 成功時に結果が正しく報告される
- [ ] ドキュメントが正確である

## ドキュメントの作成

### ドキュメントの種類

1. **コマンドリファレンス**: `how_to_vibe_coding/COMMANDS.md`
   - 各コマンドの詳細な説明
   - 使用例
   - オプション一覧

2. **アーキテクチャドキュメント**: `how_to_vibe_coding/ARCHITECTURE.md`
   - システム設計
   - 拡張方法
   - ベストプラクティス

3. **README**: `README.md`
   - プロジェクト概要
   - クイックスタート
   - 基本的な使い方

### ドキュメント作成のガイドライン

1. **明確性**: 専門用語を避け、わかりやすく説明
2. **完全性**: 必要な情報をすべて含める
3. **具体例**: 抽象的な説明ではなく具体例を提供
4. **視覚的**: 図表やコードブロックを活用
5. **更新性**: コード変更時にドキュメントも更新

### Markdown記法

```markdown
# 見出し1
## 見出し2
### 見出し3

**太字**
*イタリック*
`コード`

\`\`\`bash
# コードブロック
command --option
\`\`\`

- リスト項目1
- リスト項目2
  - サブ項目

1. 順序リスト1
2. 順序リスト2

[リンクテキスト](URL)

![画像の説明](画像URL)
```

### Mermaid図表

```markdown
\`\`\`mermaid
graph TD
    A[開始] --> B{条件}
    B -->|Yes| C[処理1]
    B -->|No| D[処理2]
    C --> E[終了]
    D --> E
\`\`\`
```

## プルリクエストの作成

### PRを作成する前に

- [ ] コードが正しく動作することを確認
- [ ] ドキュメントを更新
- [ ] コミットメッセージが適切
- [ ] 不要なファイルが含まれていない

### PRの作成手順

1. **変更をコミット**

```bash
git add .
git commit -m "feat: Add /gh-workflow command

- Add GitHub Actions workflow generator
- Support CI/CD/Release workflows
- Update documentation
"
```

**コミットメッセージの形式**:
```
<type>: <subject>

<body>

<footer>
```

**type**:
- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメント更新
- `refactor`: リファクタリング
- `test`: テスト追加・修正
- `chore`: その他の変更

2. **変更をプッシュ**

```bash
git push origin feature/your-feature-name
```

3. **PRを作成**

GitHub上で「Compare & pull request」をクリック

**PRテンプレート**:
```markdown
## 概要
このPRの目的を簡潔に説明

## 変更内容
- 変更点1
- 変更点2

## 関連Issue
Closes #123

## テスト方法
1. コマンドを実行: `/new-command`
2. 結果を確認

## チェックリスト
- [ ] コードが正しく動作する
- [ ] ドキュメントを更新した
- [ ] テストを実施した
```

4. **レビューを待つ**

メンテナーがレビューを行います。フィードバックがあれば対応してください。

### PRのレビュー基準

1. **機能性**: 期待通りに動作するか
2. **コード品質**: 読みやすく保守しやすいか
3. **ドキュメント**: 適切に文書化されているか
4. **一貫性**: 既存のコードスタイルに従っているか
5. **テスト**: 十分にテストされているか

## コードレビュー

### レビュー者として

1. **建設的なフィードバック**: 改善案を具体的に提示
2. **質問する**: 不明点は遠慮なく質問
3. **賞賛する**: 良い点も積極的に伝える
4. **迅速な対応**: 可能な限り早くレビュー

### レビュー対象者として

1. **謙虚に受け止める**: フィードバックを前向きに捉える
2. **質問を歓迎**: 不明点は説明する
3. **迅速な修正**: 指摘事項には速やかに対応
4. **議論を楽しむ**: 技術的な議論を楽しむ

## リリースプロセス

### バージョニング

[Semantic Versioning](https://semver.org/) に従います:

- **MAJOR**: 破壊的変更
- **MINOR**: 後方互換性のある機能追加
- **PATCH**: 後方互換性のあるバグ修正

例: `v1.2.3`
- 1: メジャーバージョン
- 2: マイナーバージョン
- 3: パッチバージョン

### リリース手順（メンテナー向け）

1. **CHANGELOG.mdの更新**
2. **バージョンタグの作成**
3. **GitHub Releaseの作成**
4. **アナウンス**

## よくある質問

### Q1: 初めての貢献で何から始めればいいですか?

A: まずは小さなタスクから始めることをお勧めします:
- タイポ修正
- ドキュメントの改善
- 既存コマンドの小さな機能追加

### Q2: PRがマージされない場合は?

A: 以下を確認してください:
- レビューコメントに対応しているか
- テストが通っているか
- ドキュメントが更新されているか

不明な点があれば、PRのコメントで質問してください。

### Q3: 機能提案したいのですが?

A: まずIssueを作成して提案してください:
1. 既存のIssueで同じ提案がないか検索
2. なければ新しいIssueを作成
3. ユースケースと実装案を記載
4. メンテナーからのフィードバックを待つ

### Q4: バグを見つけました

A: Issueで報告してください:
1. バグの再現手順
2. 期待される動作
3. 実際の動作
4. 環境情報（OS、ClaudeCodeバージョン等）

## サポート

### 質問・相談

- **Issue**: バグ報告や機能提案
- **Discussion**: 一般的な質問や相談
- **PR**: コードの貢献

### コミュニティ

プロジェクトに関する議論や情報共有は、GitHubのDiscussionsをご利用ください。

## 謝辞

このプロジェクトへのすべてのコントリビューターに感謝します!

貢献者一覧: [CONTRIBUTORS.md](CONTRIBUTORS.md)（追加予定）

## ライセンス

このプロジェクトは MIT License の下で公開されています。詳細は [LICENSE](LICENSE) をご覧ください。

---

貢献に興味を持っていただき、ありがとうございます! 質問があれば、遠慮なくIssueで聞いてください。
